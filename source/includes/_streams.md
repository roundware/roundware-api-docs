# streams/

### Definition:
A unique session-based audio stream generated by RW based on the evolving filters (tags and location) supplied by a particular client; streams consist of a summation of speaker audio and asset audio (per the audiotracks).

<aside class="success">
Note â€” <code>streams/</code> is the only endpoint that does not correspond to a model. Streams are created and manipulated in real-time on a session-by-session basis and only exist while a session is active.
</aside>

## POST streams/

```python
import requests

url = "http://localhost:8888/api/2/streams/"

payload = '{"session_id": 1, "latitude": 1.2345, "longitude": 2.3456}'
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http://localhost:8888/api/2/streams/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --data '{
  "session_id": 1,
  "latitude": 1.2345,
  "longitude": 2.3456
}'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  },
  "processData": false,
  "data": '{"session_id": 1, "latitude": 1.2345, "longitude": 2.3456}'
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Sample JSON response:

```json
{
  "stream_url": "http://localhost:8000/stream1.mp3",
  "stream_id": 1
}
```

Create new Stream.

### HTTP Request

`POST localhost:8888/api/2/streams/`

### Required Parameters
Data format: `multipart/form-data`

Parameter | Format | Sample | Description/Notes
--------- | ------ | ------ | -----------------
session_id | integer | 1 | current client session

### Optional Parameters

Parameter | Format | Sample | Description/Notes
--------- | ------ | ------ | -----------------
latitude | double | 1.2345 | specifies initial location of listener; required for `geo_listen_enabled=true` sessions
longitude | double | 2.3456 | specifies initial location of listener; required for `geo_listen_enabled=true` sessions


## PATCH streams/:id/ [location]

```python
import requests

url = "http://localhost:8888/api/2/streams/1/"

payload = '{"latitude": 2.3,"longitude": 1.2}'
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("PATCH", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request PATCH \
  --url http://localhost:8888/api/2/streams/1/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --data '{
  "latitude": 0,
  "longitude": 1,
}'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/",
  "method": "PATCH",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  },
  "processData": false,
  "data": '{"latitude": 1.21,"longitude": 3.24}'
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Update Stream with new listener location.

### HTTP Request

`PATCH localhost:8888/api/2/streams/:id/`

### Required Parameters
Data format: `multipart/form-data`

Parameter | Format | Sample | Description/Notes
--------- | ------ | ------ | -----------------
latitude | double | 1.2345 |
longitude | double | 2.3456 |

### Optional Parameters
Data format: `multipart/form-data`

Parameter | Format | Sample | Description/Notes
--------- | ------ | ------ | -----------------
listener_range_max | integer | 10000 | maximum distance threshold in meters
listener_range_min | integer | 1000 | minimum distance threshold in meters, default = 0
listener_heading | float | 55.0 | compass heading of directional listening (degrees)
listener_width | float | 10.0 | width of listening "beam" (degrees), default=10

### Range Listening Mode

If the `listener_range_max` parameter is included in request, the stream switches to "range listening" mode in which assets are added to the playlist based on being located within a distance threshold determined by the user. This allows users to choose to listen to content that is much further from them physically than would normally be accessible in `geo_listen_enabled` mode. The `listener_range_max` parameter must be included in every request for which client wishes to remain in range listening mode; if not included, stream will default back to standard listening mode for the project (geo or global listening).

By default, `listener_range_min` is set to 0. If client includes `listener_range_min` in request in addition to `listener_range_max`, the playlist will be filtered for assets that are more than `listener_range_min` and less than `listener_range_max` from the listener.

### Directional Listening Mode

If `listener_heading` is included in a request with a valid value, the stream switches to "directional listening" mode in which assets are added to the playlist based on being located in the specified direction (compass heading) from the listener. `listener_width` specifies how many degrees (centered around `listener_heading`) the "listening beam" should extend. The lower the value, the thinner and more focussed the beam becomes.

`listener_range_min/max` parameters can be used in combination with directional listening to provide a direction as well as a distance range to filter for available assets. With no range parameters included in request, all assets from the listener's location to the antipodal location on the other side of the earth will be heard. The `listener_range_max` parameter must be included in every request for which client wishes to remain in range listening mode; if not included, stream will default back to standard listening mode for the project (geo or global listening).

## PATCH streams/:id/ [tags]

```python
import requests

url = "http://localhost:8888/api/2/streams/1/"

payload = '{"tag_ids": "3,4,5"}'
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("PATCH", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request PATCH \
  --url http://localhost:8888/api/2/streams/1/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --data '{
  "tag_ids": "3,4,5"
}'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/",
  "method": "PATCH",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  },
  "processData": false,
  "data": '{"tag_ids": "3,4,5"}'
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Update Stream with new tag filters.

This request filters the playlist of Assets, but for `geo_listen_enabled` Sessions, only updates the in-range Assets if `latitude` and `longitude` are also included in the `PATCH` data. Therefore, it is best practice to include `latitude` and `longitude` in these requests for `geo_listen_enabled` projects.

### HTTP Request

`PATCH localhost:8888/api/2/streams/:id/`

### Required Parameters
Data format: `multipart/form-data`

Parameter | Format | Sample | Description/Notes
--------- | ------ | ------ | -----------------
tag_ids | comma separated list | 3,4,5 |


## POST streams/:id/heartbeat/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/heartbeat/"

payload = ""
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http:///localhost:8888/api/2/streams/1/heartbeat/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --header 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/heartbeat/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Send heartbeat to Stream to register activity in order to keep alive.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/heartbeat/`


## POST streams/:id/playasset/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/playasset/"

payload = '{"asset_id": 1}'
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http:///localhost:8888/api/2/streams/1/playasset/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --header 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'
  --data '{
  "asset_id": 1
}'
```

```javascript
var form = new FormData();
form.append('asset_id', 1);

var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/playasset/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  },
  "processData": false,
  "contentType": false,
  "mimeType": "multipart/form-data",
  "data": form
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Fade out currently playing Asset in Stream and play specified Asset.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/playasset/`


## POST streams/:id/replayasset/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/replayasset/"

payload = ""
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http:///localhost:8888/api/2/streams/1/replayasset/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --header 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/replayasset/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Fade out currently playing Asset and play it again per Audiotrack settings.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/replayasset/`


## POST streams/:id/skipasset/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/skipasset/"

payload = ""
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http:///localhost:8888/api/2/streams/1/skipasset/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --header 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/skipasset/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Fade out currently playing Asset and play next Asset in playlist.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/skipasset/`


## POST streams/:id/pause/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/pause/"

payload = ""
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http:///localhost:8888/api/2/streams/1/pause/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --header 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/pause/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Fade out currently playing Asset and prevent new Assets from being added to the Stream from the playlist.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/pause/`


## POST streams/:id/resume/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/resume/"

payload = ""
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http:///localhost:8888/api/2/streams/1/resume/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --header 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/resume/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Returns 200 OK if successful

Undo pause action on Stream by resuming the adding of Assets to the Stream per Audiotrack settings.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/resume/`


## GET streams/:id/isactive/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/isactive/"

payload = ""
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("GET", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request GET \
  --url http://localhost:8888/api/2/streams/1/isactive/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/isactive/",
  "method": "GET",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Sample JSON response:

```json
{
  "active": true,
  "stream_id": 1
}
```

Determine if a specific Stream is currently alive and streaming.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/isactive/`


## POST streams/:id/kill/

```python
import requests

url = "http://localhost:8888/api/2/streams/1/kill/"

payload = ""
headers = {
    'authorization': "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
    }

response = requests.request("POST", url, data=payload, headers=headers)

print(response.text)
```

```shell
curl --request POST \
  --url http:///localhost:8888/api/2/streams/1/kill/ \
  --header 'authorization: token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4' \
  --header 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'
```

```javascript
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8888/api/2/streams/1/kill/",
  "method": "POST",
  "headers": {
    "authorization": "token 4ee0fc210823c2c2f72f06e3fe862c0f6740d3b4"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
```

> Sample JSON response:

```json
{
    "stream_id": 1,
    "success": true
}
```

Kill a stream and clean it up.

### HTTP Request

`GET localhost:8888/api/2/streams/:id/kill/`
